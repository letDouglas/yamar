receivers:
  otlp:
    protocols:
      grpc:
        endpoint: "0.0.0.0:4317" # Listen for OTLP gRPC traces/metrics
      http:
        endpoint: "0.0.0.0:4318" # Listen for OTLP HTTP traces/metrics

processors:
  batch:
    timeout: 1s           # Max wait time before sending a batch
    send_batch_size: 1024 # Number of records per batch for optimal throughput

exporters:
  otlp/tempo:
    endpoint: "tempo:4317" # OTLP endpoint for sending traces to Tempo
    tls:
      insecure: true       # Disable TLS verification for local/Docker environments

  prometheus:
    endpoint: "0.0.0.0:8889" # Expose metrics for Prometheus scraping
    namespace: "yamar"        # Prefix for all metrics

  debug:
    verbosity: basic # Simple console output for verification/debugging

service:
  pipelines:
    traces:
      receivers: [ otlp ]                # Accept traces via OTLP
      processors: [ batch ]              # Apply batching before export
      exporters: [ otlp/tempo, debug ]   # Export to Tempo and optionally log

    metrics:
      receivers: [ otlp ]                # Accept metrics via OTLP
      processors: [ batch ]              # Apply batching before export
      exporters: [ prometheus, debug ]   # Export to Prometheus and optionally log
